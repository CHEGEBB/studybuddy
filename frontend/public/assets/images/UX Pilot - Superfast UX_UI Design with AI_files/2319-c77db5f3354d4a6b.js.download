"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2319],{72319:function(e,r,t){t.d(r,{ZP:function(){return Contexts_SubscriptionProvider},mU:function(){return useSubscription}});var n=t(9),a=t(57437),u=t(2265),o=t(4392),i=t(46095),s=t(79398),d=t(45610),c=t(50044),l=t(45511),p=t(15203),f=t(27419);function _sendPurchaseDataToLayer(){return(_sendPurchaseDataToLayer=(0,d._)(function(e){var r,t,n,a,u,o,s,d,S,E,y,v,m,h;return(0,c.Jh)(this,function(c){switch(c.label){case 0:r=e.analytics,t=e.userId,n=e.planType,a=e.email,c.label=1;case 1:return c.trys.push([1,11,,12]),[4,(0,p.b)().dispatch(f.h7.endpoints.getPaymentLogs.initiate(t))];case 2:if(!((null==(o=c.sent())?void 0:o.data)&&Array.isArray(null==o?void 0:null===(u=o.data)||void 0===u?void 0:u.payments)))return[3,10];s=!0,d=!1,S=void 0,c.label=3;case 3:c.trys.push([3,8,9,10]),E=o.data.payments[Symbol.iterator](),c.label=4;case 4:if(s=(y=E.next()).done)return[3,7];if((v=y.value).isSentToDataLayer)return[3,6];return l.Z.trackPurchase({user_id:t,plan:n,email:a,currency:v.currency||"USD",value:v.amount,subscription_id:v.id,phone:v.phone}),r.capture(i.Je.PURCHASE_COMPLETED,{user_id:t,plan:n,email:a,currency:v.currency||"USD",value:v.amount,subscription_id:v.id}),[4,(0,p.b)().dispatch(f.h7.endpoints.markPaymentSent.initiate({userId:t,paymentId:v.id}))];case 5:(null==(m=c.sent().data)?void 0:m.success)||console.error("Error marking payment as sent:",m),c.label=6;case 6:return s=!0,[3,4];case 7:return[3,10];case 8:return h=c.sent(),d=!0,S=h,[3,10];case 9:try{s||null==E.return||E.return()}finally{if(d)throw S}return[7];case 10:return[3,12];case 11:return console.error("Error in sendPurchaseDataToLayer:",c.sent()),[3,12];case 12:return[2]}})})).apply(this,arguments)}var formatTimestamp=function(e){if(!e)return null;try{if("object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"_seconds")&&Object.prototype.hasOwnProperty.call(e,"_nanoseconds"))return new Date(1e3*e._seconds+e._nanoseconds/1e6).toLocaleDateString();if("number"==typeof e)return new Date(1e3*e).toLocaleDateString();if(e instanceof Date||"string"==typeof e)return new Date(e).toLocaleDateString();return null}catch(e){return console.error("Error formatting timestamp:",e),null}},S=(0,u.createContext)(),useSubscription=function(){return(0,u.useContext)(S)},Contexts_SubscriptionProvider=function(e){var r=e.children,t=(0,s.z)(),d=(0,o.aC)(),c=d.userInfo,l=d.currentUser,p=d.googleUID,E=(0,n._)((0,u.useState)(!0),2),y=E[0],v=E[1],m=(0,n._)((0,u.useState)(!0),2),h=m[0],A=m[1],T=(0,n._)((0,u.useState)(!1),2),g=T[0],I=T[1],_=(0,n._)((0,u.useState)(!1),2),R=_[0],P=_[1],q=(0,n._)((0,u.useState)(!1),2),C=q[0],G=q[1],b=(0,n._)((0,u.useState)(!1),2),D=b[0],O=b[1],U=(0,n._)((0,u.useState)(null),2),N=U[0],L=U[1],w=(0,n._)((0,u.useState)(null),2),V=w[0],F=w[1],M=(0,n._)((0,u.useState)(null),2),W=M[0],z=M[1],H=(0,f.ty)({uid:p,email:null==l?void 0:l.email},{skip:!p||!(null==l?void 0:l.email),refetchOnMountOrArgChange:!0}),B=H.data,Q=H.isFetching,k=(0,u.useMemo)(function(){if(!c)return"";var e,r=c.isEnterpriseUser?i.FD.ENTERPRISE:(e=c.subscriptionPlanId)?i.on[i.FD.PRO].has(e)?i.FD.PRO:i.on[i.FD.STANDARD].has(e)?i.FD.STANDARD:i.FD.FREE:i.FD.FREE;return r!==i.FD.FREE&&c.status===i.FD.INACTIVE?i.FD.INACTIVE:r},[c]);(0,u.useEffect)(function(){B&&function(e){if(e)switch(z(e),I(!0===e.isBetaUser),P(e.isEnterpriseUser),G(e.enterprisePlanStatus),O(e.enterpriseAccessStatus),e.subscriptionCancelledAt?F(formatTimestamp(e.subscriptionCancelledAt)):F(null),e.status){case"subscribed":v(!0),A(!1),L(formatTimestamp(e.subscriptionEndsAt));break;case"not-subscribed":v(!1),A(!1),L(null);break;default:A(!1),v(!1),L(null)}}(B)},[B]);var x=(0,u.useMemo)(function(){return null==W?void 0:W.counters},[null==W?void 0:W.counters]),j=(0,u.useMemo)(function(){var e,r,t,n,a,u,o,i,s,d,c=null!==(u=null==x?void 0:null===(e=x.planCredits)||void 0===e?void 0:e.remaining)&&void 0!==u?u:0,l=null!==(o=null==x?void 0:null===(r=x.boughtCredits)||void 0===r?void 0:r.remaining)&&void 0!==o?o:0,p=c+l,f=l>1?(null!==(i=null==x?void 0:null===(t=x.boughtCredits)||void 0===t?void 0:t.total)&&void 0!==i?i:0)+(null!==(s=null==x?void 0:null===(n=x.planCredits)||void 0===n?void 0:n.total)&&void 0!==s?s:0):null!==(d=null==x?void 0:null===(a=x.planCredits)||void 0===a?void 0:a.total)&&void 0!==d?d:0,S=Math.min(100,f>0?(p/f*100).toFixed(2):0);return{planCreditsRemaining:c,boughtCreditsRemaining:l,totalAvailableCredits:p,totalOverallCredits:f,creditPercentage:S}},[x,B]);(0,u.useEffect)(function(){if(W&&(t.setUserProperties({subscription_status:y?"subscribed":"not_subscribed",plan_type:k,is_beta_user:g,subscription_ends_at:N,subscription_cancelled_at:V,total_credits:j.totalOverallCredits,available_credits:j.totalAvailableCredits,credit_percentage:j.creditPercentage}),j.totalAvailableCredits<=6)){var e=localStorage.getItem("last_reported_usage");(!e||Date.now()-e>864e5)&&(t.capture(i.Je.CREDITS_RUNNING_LOW,{distinct_id:p,user_id:p,available_credits:j.totalAvailableCredits,total_credits:j.totalOverallCredits,plan_type:k,subscription_status:y?"subscribed":"not_subscribed"}),localStorage.setItem("last_reported_usage",Date.now()))}},[W,y,k,g,N,V,j,t,p]),(0,u.useEffect)(function(){!h&&!Q&&(null==c?void 0:c.subscriptionId)&&y&&function(e){_sendPurchaseDataToLayer.apply(this,arguments)}({analytics:t,userId:c.uid,planType:k,email:null==l?void 0:l.email})},[h,Q,y,c,k,t,null==l?void 0:l.email]);var Y=(0,u.useMemo)(function(){var e,r,t,n,a,u,o,i;return{isSubscribed:y,planType:k,isLoading:h||Q,isBetaUser:g,isEnterpriseUser:R,enterpriseAccessStatus:D,enterprisePlanStatus:C,subscriptionEndsAt:N,subscriptionCancelledAt:V,counters:{planCredits:null!==(a=null==x?void 0:null===(e=x.planCredits)||void 0===e?void 0:e.remaining)&&void 0!==a?a:0,boughtCredits:null!==(u=null==x?void 0:null===(r=x.boughtCredits)||void 0===r?void 0:r.remaining)&&void 0!==u?u:0,totalCredits:null!==(o=null==x?void 0:null===(t=x.planCredits)||void 0===t?void 0:t.total)&&void 0!==o?o:0,totalAvailableCredits:j.totalAvailableCredits,totalOverallCredits:j.totalOverallCredits,planExpireDate:null!==(i=null==x?void 0:null===(n=x.planCredits)||void 0===n?void 0:n.resetDate)&&void 0!==i?i:null,creditPercentage:j.creditPercentage}}},[y,k,h,Q,g,N,V,x,j,D,C]);return(0,a.jsx)(S.Provider,{value:Y,children:r})}},61841:function(e,r,t){t.d(r,{Qu:function(){return c},Tm:function(){return p},iC:function(){return l},nY:function(){return f},uW:function(){return d}});var n=t(44313),a=t(85687),u=t(90012),o=t(65800),i=t(16958),s=t(12991),d=(0,a.LC)({reducerPath:i.V.CANVAS_ASSETS,baseQuery:o.hK,tagTypes:[i.q.CANVAS_ASSETS,i.q.PAGES,i.q.WIREFRAMES],endpoints:function(e){return{getCanvasAssetsByPage:e.query({query:function(e){var r=e.pageId;if(!r||null===r||""===r.trim())throw console.error("❌ Invalid pageId provided to getCanvasAssetsByPage:",r),Error("Invalid pageId provided to getCanvasAssetsByPage");return{url:"".concat(s.q.GET_CANVAS_ASSETS_ON_PAGE,"/").concat(r),method:"GET"}},transformResponse:function(e){return e},transformErrorResponse:u.z,keepUnusedDataFor:300}),createCanvasAsset:e.mutation({query:function(e){var r=e.pageId,t=e.uid,n=e.props,a=e.file;if(!r||null===r||""===r.trim())throw Error("Invalid pageId provided to createCanvasAsset");if(!t||null===t)throw Error("Invalid uid provided to createCanvasAsset");var u=new FormData;return u.append("pageId",r),u.append("uid",t),u.append("props",JSON.stringify(n)),u.append("file",a),{url:"".concat(s.q.CREATE_CANVAS_ASSET),method:"POST",body:u}}}),deleteCanvasAsset:e.mutation({query:function(e){var r=e.assetId,t=e.uid,n=e.pageId;return{url:"".concat(s.q.DELETE_CANVAS_ASSET,"/").concat(r,"?uid=").concat(t,"&pageId=").concat(n),method:"DELETE"}},transformResponse:function(e){return e},transformErrorResponse:u.z,invalidatesTags:function(e,r,t){var a=t.assetId,u=t.pageId;return[{type:i.q.CANVAS_ASSETS,id:a}].concat((0,n._)(u?[{type:i.q.PAGES,id:u}]:[]),[{type:i.q.CANVAS_ASSETS,id:"LIST"}])}}),getCanvasAssetById:e.query({query:function(e){var r=e.assetId;return{url:"".concat(s.q.GET_CANVAS_ASSET_BY_ID,"/").concat(r),method:"GET"}},transformResponse:function(e){return e},transformErrorResponse:u.z,keepUnusedDataFor:300})}}});d.useGetCanvasAssetsByPageQuery;var c=d.useCreateCanvasAssetMutation,l=d.useLazyGetCanvasAssetsByPageQuery,p=(d.useGetCanvasAssetByIdQuery,d.useLazyGetCanvasAssetByIdQuery),f=d.useDeleteCanvasAssetMutation},82924:function(e,r,t){t.d(r,{Av:function(){return E},Zt:function(){return y},fo:function(){return f},ic:function(){return v},og:function(){return S}});var n=t(45610),a=t(41369),u=t(43654),o=t(44313),i=t(50044),s=t(85687),d=t(90012),c=t(65800),l=t(16958),p=t(12991),f=(0,s.LC)({reducerPath:l.V.CANVAS_SHAPES,baseQuery:c.hK,tagTypes:[l.q.CANVAS_SHAPES,l.q.PAGES,l.q.WIREFRAMES],endpoints:function(e){return{getCanvasShapesByPage:e.query({query:function(e){var r=e.pageId;if(!r||"null"===r||"undefined"===r||""===r.trim())throw console.error("❌ Invalid pageId provided to getCanvasShapesByPage:",r),Error("Invalid pageId provided to getCanvasShapesByPage");return{url:"".concat(p.q.GET_CANVAS_SHAPES_BY_PAGE,"/").concat(r),method:"GET"}},transformResponse:function(e){return e},transformErrorResponse:d.z,providesTags:function(e,r,t){var n,a=t.pageId;return[{type:l.q.PAGES,id:a},{type:l.q.CANVAS_SHAPES,id:"LIST"}].concat((0,o._)((null==e?void 0:null===(n=e.shapes)||void 0===n?void 0:n.map(function(e){var r=e.id;return{type:l.q.CANVAS_SHAPES,id:r}}))||[]))},keepUnusedDataFor:300}),getCanvasShapeById:e.query({query:function(e){var r=e.shapeId;if(!r||null===r)throw console.error("❌ Invalid shapeId provided to getCanvasShapeById:",r),Error("Invalid shapeId provided to getCanvasShapeById");return{url:"".concat(p.q.GET_CANVAS_SHAPE_BY_ID,"/").concat(r),method:"GET"}},transformResponse:function(e){return e},transformErrorResponse:d.z,providesTags:function(e,r,t){var n=t.shapeId;return[{type:l.q.CANVAS_SHAPES,id:n}]},keepUnusedDataFor:180}),createCanvasShape:e.mutation({query:function(e){var r=e.pageId,t=e.props,n=e.type;if(!r||null===r||""===r.trim())throw console.error("❌ Invalid pageId provided to createCanvasShape:",r),Error("Invalid pageId provided to createCanvasShape");return{url:p.q.GET_CANVAS_SHAPE_BY_ID,method:"POST",body:{pageId:r,props:t,type:n,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}}},transformResponse:function(e){return e},transformErrorResponse:d.z,invalidatesTags:function(e,r,t){var n=t.pageId,a=[{type:l.q.CANVAS_SHAPES,id:"LIST"},{type:l.q.PAGES,id:n}];return(null==e?void 0:e.shape)&&!r&&a.push({type:l.q.CANVAS_SHAPES,id:e.shape.id}),a}}),updateCanvasShape:e.mutation({query:function(e){var r=e.shapeId,t=e.data;return{url:"".concat(p.q.UPDATE_CANVAS_SHAPE,"/").concat(r),method:"PUT",body:t}},transformResponse:function(e){return e},transformErrorResponse:d.z,onQueryStarted:function(e,r){var t=e.shapeId,o=e.data,s=r.dispatch,d=r.queryFulfilled,c=r.getState;return(0,n._)(function(){var e,r,n,l,p,S,E;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(!t||null===t||""===t)return[2];(e=Object.values(c()).find(function(e){return(null==e?void 0:e.queries)&&Object.values(e.queries).some(function(e){var r,n;return null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(r=n.shapes)||void 0===r?void 0:r.find(function(e){return e.id===t})})}))&&(r=null==(S=Object.values(e.queries).find(function(e){var r,n;return null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(r=n.shapes)||void 0===r?void 0:r.find(function(e){return e.id===t})}))?void 0:null===(p=S.data)||void 0===p?void 0:null===(l=p.shapes)||void 0===l?void 0:null===(n=l.find(function(e){return e.id===t}))||void 0===n?void 0:n.pageId),r&&"null"!==r&&"undefined"!==r&&(E=s(f.util.updateQueryData("getCanvasShapesByPage",{pageId:r},function(e){var r,n=null===(r=e.shapes)||void 0===r?void 0:r.findIndex(function(e){return e.id===t});void 0!==n&&n>=0&&e.shapes&&(o.props&&(e.shapes[n].props=(0,a._)({},e.shapes[n].props,o.props)),Object.assign(e.shapes[n],(0,u._)((0,a._)({},o),{updatedAt:new Date().toISOString()})))}))),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,d];case 2:return i.sent(),[3,4];case 3:return i.sent(),E&&E.undo(),[3,4];case 4:return[2]}})})()},invalidatesTags:function(e,r,t){var n=t.shapeId,a=[{type:l.q.CANVAS_SHAPES,id:"LIST"}];return e&&!r&&a.push({type:l.q.CANVAS_SHAPES,id:n}),a}}),deleteCanvasShape:e.mutation({query:function(e){var r=e.shapeId;return{url:"".concat(p.q.DELETE_CANVAS_SHAPE,"/").concat(r),method:"DELETE"}},transformResponse:function(e){return e},transformErrorResponse:d.z,onQueryStarted:function(e,r){var t=e.shapeId,a=e.pageId,u=r.dispatch,o=r.queryFulfilled;return r.getState,(0,n._)(function(){var e;return(0,i.Jh)(this,function(r){switch(r.label){case 0:a&&null!==a&&(e=u(f.util.updateQueryData("getCanvasShapesByPage",{pageId:a},function(e){e.shapes&&(e.shapes=e.shapes.filter(function(e){return e.id!==t}))}))),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,o];case 2:return r.sent(),[3,4];case 3:return r.sent(),e&&e.undo(),[3,4];case 4:return[2]}})})()},invalidatesTags:function(e,r,t){var n=t.shapeId,a=t.pageId;return[{type:l.q.CANVAS_SHAPES,id:n}].concat((0,o._)(a?[{type:l.q.PAGES,id:a}]:[]),[{type:l.q.CANVAS_SHAPES,id:"LIST"}])}}),updateMultipleCanvasShapes:e.mutation({query:function(e){var r=e.shapes;return{url:"".concat(p.q.UPDATE_CANVAS_SHAPE,"/batch"),method:"PUT",body:{shapes:r}}},transformResponse:function(e){return e},transformErrorResponse:d.z,invalidatesTags:function(e,r,t){var n=t.pageId;return[{type:l.q.PAGES,id:n},{type:l.q.CANVAS_SHAPES,id:"LIST"}]}}),deleteMultipleCanvasShapes:e.mutation({query:function(e){var r=e.shapeIds;return{url:"".concat(p.q.DELETE_CANVAS_SHAPE,"/batch"),method:"DELETE",body:{shapeIds:r}}},transformResponse:function(e){return e},transformErrorResponse:d.z,invalidatesTags:function(e,r,t){var n=t.pageId,a=t.shapeIds;return[{type:l.q.PAGES,id:n},{type:l.q.CANVAS_SHAPES,id:"LIST"}].concat((0,o._)(a.map(function(e){return{type:l.q.CANVAS_SHAPES,id:e}})))}})}}});f.useGetCanvasShapesByPageQuery,f.useGetCanvasShapeByIdQuery;var S=f.useCreateCanvasShapeMutation,E=f.useUpdateCanvasShapeMutation,y=f.useDeleteCanvasShapeMutation,v=(f.useUpdateMultipleCanvasShapesMutation,f.useDeleteMultipleCanvasShapesMutation,f.useLazyGetCanvasShapesByPageQuery);f.useLazyGetCanvasShapeByIdQuery},14451:function(e,r,t){t.d(r,{W$:function(){return h},G7:function(){return O},Dr:function(){return R},HJ:function(){return g},UC:function(){return T},iK:function(){return I},t7:function(){return A},L5:function(){return q},Be:function(){return G},zV:function(){return b},Ad:function(){return D},qz:function(){return P},FK:function(){return _},Xw:function(){return C}});var n=t(45610),a=t(41369),u=t(43654),o=t(50044),i=t(85687),s=t(97304),d=t(38597),c=t(90012),l=t(65800),p=t(12991),f=t(16958),S={ALLOW_DATA_ATTR:!0,FORBID_TAGS:["script","iframe","object","embed","base","link"],FORBID_ATTR:["onclick","onmouseover","onmouseenter","onmouseleave","onmousemove","onmouseout","onmousedown","onmouseup","onload","onerror","onfocus","onblur","srcdoc","formaction"],KEEP_CONTENT:!0},E=t(36902),y=t(16972);function xorDecrypt(e,r){return e.split("").map(function(e,t){return String.fromCharCode(e.charCodeAt(0)^r.charCodeAt(t%r.length))}).join("")}var v=t(46095),m=t(40263).Buffer,h=(0,i.LC)({reducerPath:f.V.DESIGN,baseQuery:l.hK,tagTypes:[f.q.GENERATE,f.q.GENERATE_HIFI,f.q.GENERATE_WIREFRAMES,f.q.DESIGN_COLLECTIONS],endpoints:function(e){return{generateWireframes:e.mutation({query:function(e){return{url:p.q.GENERATE_WIREFRAMES,method:"POST",body:e}},transformResponse:function(e){return{id:e.id||e.wireframeId||e.uiId,wireframeId:e.wireframeId||e.id||e.uiId,design:e.design||e}},transformErrorResponse:c.z}),generateHiFi:e.mutation({query:function(e){return{url:p.q.GENERATE_HIFI,method:"POST",body:e}},transformResponse:function(e){return{id:e.id||e.wireframeId||e.uiId,wireframeId:e.wireframeId||e.id||e.uiId,design:e.design||e}},transformErrorResponse:c.z}),retryHiFiGeneration:e.mutation({query:function(e){return{url:p.q.RETRY_HIFI_GENERATION,method:"POST",body:e}},transformResponse:function(e){return e},transformErrorResponse:c.z}),retryWireframeGeneration:e.mutation({query:function(e){return{url:p.q.RETRY_WIREFRAMES_GENERATION,method:"POST",body:e}},transformResponse:function(e){return e},transformErrorResponse:c.z}),generateByFlow:e.mutation({query:function(e){return{url:p.q.GENERATE_BY_FLOW,method:"POST",body:e}},transformResponse:function(e){return!e.designs&&Array.isArray(e)?{designs:e}:e},transformErrorResponse:c.z}),generateFlow:e.mutation({query:function(e){return{url:p.q.GENERATE_USERFLOW,method:"POST",body:e}},transformErrorResponse:c.z}),generateVariations:e.mutation({query:function(e){return{url:p.q.GENERATE_VARIATIONS,method:"POST",body:e}},transformErrorResponse:c.z}),generateHeatmap:e.mutation({query:function(e){return{url:p.q.HEATMAP,method:"POST",body:e}},transformErrorResponse:c.z}),generateL1:e.mutation({query:function(e){return{url:"".concat(d.URLS.kbUrl,"/generate/l1"),method:"POST",body:e}},transformResponse:function(e){return e},transformErrorResponse:c.z}),storeSession:e.mutation({query:function(e){return{url:p.q.STORE_SESSIONS,method:"POST",body:e}},transformErrorResponse:c.z}),generateDesignsFlow:e.mutation({query:function(e){return{url:p.q.GENERATE_BY_FLOW,method:"POST",body:e}},transformResponse:function(e){return Array.isArray(null==e?void 0:e.designs)?null==e?void 0:e.designs:[]},transformErrorResponse:c.z}),generateByVariationFlow:e.mutation({query:function(e){return{url:p.q.GENERATE_BY_VARIATION_FLOW,method:"POST",body:e}},transformResponse:function(e){return Array.isArray(null==e?void 0:e.designs)?null==e?void 0:e.designs:[]},transformErrorResponse:c.z}),saveTextChanges:e.mutation({query:function(e){var r=s.Z.sanitize(e.updatedHtml,S);return{url:p.q.SAVE_TEXT_CHANGES,method:"POST",body:(0,u._)((0,a._)({},e),{updatedHtml:r})}},onQueryStarted:function(e,r){var t=e.wireframeId,a=e.pageId,u=(e.updatedHtml,r.dispatch),i=r.queryFulfilled;return(0,n._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,i];case 1:return e.sent(),u(E.cr.util.invalidateTags([{type:f.q.WIREFRAMES,id:t},{type:f.q.WIREFRAMES,id:"LIST"}])),u(y.yk.util.invalidateTags([{type:f.q.PAGES,id:a},{type:f.q.PAGES,id:"LIST"}])),[3,3];case 2:return console.error("Failed to invalidate cache after text changes:",e.sent()),[3,3];case 3:return[2]}})})()},transformErrorResponse:c.z}),getDesignCollections:e.query({query:function(e){var r=e.uid;return{url:"".concat(p.q.GET_DESIGN_COLLECTIONS,"/").concat(r),method:"GET"}},transformResponse:function(e){return e.encryptedData?JSON.parse(xorDecrypt(m.from(e.encryptedData,"base64").toString("binary"),v.GF)):e},transformErrorResponse:c.z}),updateCollectionSharing:e.mutation({query:function(e){var r=e.uid,t=e.collectionName,n=e.sharedEmails;return{url:"".concat(p.q.UPDATE_COLLECTION_SHARING,"/").concat(r,"/").concat(encodeURIComponent(t)),method:"PUT",body:{sharedEmails:n}}},invalidatesTags:function(e,r,t){var n=t.collectionName;return[{type:f.q.DESIGN_COLLECTIONS,id:n},{type:f.q.DESIGN_COLLECTIONS,id:"LIST"}]},transformErrorResponse:c.z}),getSharedEmails:e.query({query:function(e){var r=e.uid,t=e.collectionName;return{url:"".concat(p.q.GET_SHARED_EMAILS,"/").concat(r,"/").concat(encodeURIComponent(t)),method:"GET"}},transformResponse:function(e){return e.encryptedData?JSON.parse(xorDecrypt(m.from(e.encryptedData,"base64").toString("binary"),v.GF)):e},transformErrorResponse:c.z})}}}),A=h.useGenerateWireframesMutation,T=h.useGenerateHiFiMutation,g=(h.useGenerateByFlowMutation,h.useGenerateFlowMutation),I=h.useGenerateVariationsMutation,_=(h.useGenerateHeatmapMutation,h.useGenerateL1Mutation,h.useStoreSessionMutation),R=h.useGenerateDesignsFlowMutation,P=h.useSaveTextChangesMutation,q=h.useGetDesignCollectionsQuery,C=h.useUpdateCollectionSharingMutation,G=h.useGetSharedEmailsQuery,b=h.useRetryHiFiGenerationMutation,D=h.useRetryWireframeGenerationMutation,O=h.useGenerateByVariationFlowMutation},52477:function(e,r,t){t.d(r,{BN:function(){return p},KR:function(){return S},TY:function(){return c},Us:function(){return f},mm:function(){return l}});var n=t(75104),a=t(44313),u=t(85687),o=t(90012),i=t(65800),s=t(16958),d=t(12991),c=(0,u.LC)({reducerPath:s.V.GROUPS,baseQuery:i.hK,tagTypes:[s.q.GROUPS,s.q.WIREFRAMES,s.q.PAGES,s.q.SAVED_WIREFRAMES],endpoints:function(e){return{getGroups:e.query({query:function(){return{url:d.q.GET_GROUPS}},transformResponse:function(e){return e},transformErrorResponse:o.z,providesTags:function(e){return e?(0,a._)(e.groups.map(function(e){var r=e.id;return{type:s.q.GROUPS,id:r}})).concat([{type:s.q.GROUPS,id:"LIST"}]):[{type:s.q.GROUPS,id:"LIST"}]},keepUnusedDataFor:30}),getGroupWireframes:e.query({query:function(e){var r=e.groupId;return{url:"".concat(d.q.GET_GROUP_WIREFRAMES,"/").concat(r)}},transformResponse:function(e){return{wireframes:e.data.wireframes}},keepUnusedDataFor:20,transformErrorResponse:o.z,providesTags:function(e,r,t){var n=t.groupId;return[{type:s.q.GROUPS,id:n},{type:s.q.WIREFRAMES,id:"LIST"}]}}),createGroup:e.mutation({query:function(e){return{url:d.q.CREATE_GROUP,method:"POST",body:e}},transformErrorResponse:o.z,invalidatesTags:[{type:s.q.GROUPS,id:"LIST"},{type:s.q.PAGES,id:"LIST"},{type:s.q.SAVED_WIREFRAMES,id:"LIST"}]}),updateGroup:e.mutation({query:function(e){var r=e.groupId,t=(0,n._)(e,["groupId"]);return{url:"".concat(d.q.UPDATE_GROUP,"/").concat(r),method:"PUT",body:t}},transformErrorResponse:o.z,invalidatesTags:function(e,r,t){var n=t.groupId;return[{type:s.q.GROUPS,id:n},{type:s.q.GROUPS,id:"LIST"},{type:s.q.PAGES,id:"LIST"},{type:s.q.SAVED_WIREFRAMES,id:"LIST"}]}}),deleteGroup:e.mutation({query:function(e){var r=e.groupId;return{url:"".concat(d.q.DELETE_GROUP,"/").concat(r),method:"DELETE"}},transformErrorResponse:o.z,invalidatesTags:[{type:s.q.GROUPS,id:"LIST"},{type:s.q.PAGES,id:"LIST"},{type:s.q.SAVED_WIREFRAMES,id:"LIST"}]}),saveGroup:e.mutation({query:function(e){var r=e.groupId;return{url:d.q.SAVE_GROUP,method:"POST",body:{groupId:r}}},transformErrorResponse:o.z,invalidatesTags:function(e,r,t){var n=t.groupId;return[{type:s.q.GROUPS,id:n},{type:s.q.GROUPS,id:"LIST"},{type:s.q.SAVED_WIREFRAMES,id:"LIST"}]}}),unsaveGroup:e.mutation({query:function(e){var r=e.groupId;return{url:d.q.UNSAVE_GROUP,method:"POST",body:{groupId:r}}},transformErrorResponse:o.z,invalidatesTags:function(e,r,t){var n=t.groupId;return[{type:s.q.GROUPS,id:n},{type:s.q.GROUPS,id:"LIST"},{type:s.q.SAVED_WIREFRAMES,id:"LIST"}]}}),moveGroup:e.mutation({query:function(e){return{url:d.q.MOVE_GROUP,method:"POST",body:e}},transformErrorResponse:o.z,invalidatesTags:function(e,r,t){var n=t.groupId,a=t.pageId,u=t.existingPageId;return[{type:s.q.GROUPS,id:n},{type:s.q.PAGES,id:a},{type:s.q.PAGES,id:u},{type:s.q.PAGES,id:"LIST"},{type:s.q.SAVED_WIREFRAMES,id:"LIST"}]}}),uploadPreview:e.mutation({query:function(e){var r=e.id,t=e.image,n=new FormData;return n.append("image",t),{url:"".concat(d.q.UPLOAD_PREVIEW,"/group/").concat(r),method:"POST",body:n}},transformErrorResponse:o.z,invalidatesTags:function(e,r,t){var n=t.id;return[{type:s.q.GROUPS,id:n},{type:s.q.GROUPS,id:"LIST"}]}})}}});c.useGetGroupsQuery,c.useGetGroupWireframesQuery;var l=c.useCreateGroupMutation,p=(c.useUpdateGroupMutation,c.useDeleteGroupMutation,c.useSaveGroupMutation,c.useUnsaveGroupMutation,c.useMoveGroupMutation),f=(c.useUploadPreviewMutation,c.useLazyGetGroupsQuery),S=c.useLazyGetGroupWireframesQuery},30398:function(e,r,t){t.d(r,{$P:function(){return S},Fh:function(){return p},c$:function(){return d},cG:function(){return c},fz:function(){return l},jM:function(){return f}});var n=t(41369),a=t(43654),u=t(85687),o=t(65800),i=t(12991),s=t(16958),d=(0,u.LC)({reducerPath:s.V.SHARING,baseQuery:o.hK,tagTypes:["sharing"],keepUnusedDataFor:3e4,endpoints:function(e){return{generateSharingUrl:e.mutation({query:function(e){return{url:i.q.GENERATE_SHARING_URL,method:"POST",body:e}},transformResponse:function(e){return(null==e?void 0:e.status)==="success"?(0,a._)((0,n._)({},e),{fullShareUrl:"".concat(window.location.origin,"/s/").concat(e.sharingUrl)}):e}}),getSharingData:e.query({query:function(e){return{url:i.q.RETRIEVE_SHARING_DATA,params:{pageId:e}}},transformResponse:function(e){return(null==e?void 0:e.status)==="success"?(0,a._)((0,n._)({},e.sharingData),{fullShareUrl:"".concat(window.location.origin,"/s/").concat(e.sharingData.sharingUrl)}):null}}),getWireframeSharingData:e.query({query:function(e){return{url:i.q.RETRIEVE_SHARING_DATA,params:{wireframeId:e}}},transformResponse:function(e){return(null==e?void 0:e.status)==="success"?(0,a._)((0,n._)({},e.sharingData),{fullShareUrl:"".concat(window.location.origin,"/s/").concat(e.sharingData.sharingUrl)}):null}}),getSharedContent:e.query({query:function(e){var r=e.shareId,t=e.googleUID;return{url:"/sharing/".concat(r).concat(t?"?uid=".concat(t):"")}},transformResponse:function(e){return(null==e?void 0:e.status)==="success"?e:null}}),getSharedProtectedContent:e.query({query:function(e){var r=e.shareId,t=e.googleUID,n=e.password;return{url:"/sharing/".concat(r,"/password-protected").concat(t?"?uid=".concat(t):""),method:"POST",body:{password:n}}},transformResponse:function(e){return e}})}}}),c=d.useGenerateSharingUrlMutation,l=(d.useGetSharingDataQuery,d.useGetWireframeSharingDataQuery,d.useLazyGetWireframeSharingDataQuery),p=d.useGetSharedContentQuery,f=d.useLazyGetSharingDataQuery,S=(d.useGetSharedProtectedContentQuery,d.useLazyGetSharedProtectedContentQuery)},24424:function(e,r,t){t.d(r,{Gt:function(){return i},ob:function(){return d},W:function(){return s}});var n=t(85687),a={SURVEY:"Survey",TRIAL:"Trial"},u=t(65800),o=t(16958),i=(0,n.LC)({reducerPath:o.V.ONBOARDING,baseQuery:u.hK,tagTypes:Object.values(a),endpoints:function(e){return{submitSurvey:e.mutation({query:function(e){return{url:"/save-survey",method:"POST",headers:{"Content-Type":"application/json"},body:e.data}},invalidatesTags:[a.SURVEY]}),startTrial:e.mutation({query:function(){return{url:"/start-trial",method:"POST",headers:{"Content-Type":"application/json"}}},invalidatesTags:[a.TRIAL]})}}}),s=i.useSubmitSurveyMutation,d=i.useStartTrialMutation},44388:function(e,r,t){t.d(r,{D2:function(){return s},IU:function(){return c},OR:function(){return i},PH:function(){return d}});var n=t(85687),a=t(16958),u=t(88138),o=t(65800),i=(0,n.LC)({reducerPath:a.V.REVIEWS_QUERIES_MUTATIONS,baseQuery:o.hK,tagTypes:[a.q.DESIGN_REVIEWS,a.q.SUBSCRIPTION],endpoints:function(e){return{getSavedReviews:e.query({query:function(e){return{url:u.h.GET_SAVED_REVIEWS,method:"GET"}},providesTags:[a.q.DESIGN_REVIEWS],transformResponse:function(e){var r;return(null==e?void 0:null===(r=e.reviews)||void 0===r?void 0:r.length)>0?e.reviews.sort(function(e,r){return new Date(r.date).getTime()-new Date(e.date).getTime()}):[]}}),saveReview:e.mutation({query:function(e){return{url:u.h.SAVE_REVIEW,method:"POST",body:e}},invalidatesTags:[a.q.DESIGN_REVIEWS]}),unsaveReview:e.mutation({query:function(e){return{url:u.h.UNSAVE_REVIEW,method:"DELETE",body:e}},invalidatesTags:[a.q.DESIGN_REVIEWS]})}}}),s=i.useGetSavedReviewsQuery,d=i.useSaveReviewMutation,c=i.useUnsaveReviewMutation},44568:function(e,r,t){t.d(r,{b:function(){return s},w:function(){return i}});var n=t(85687),a=t(88138),u=t(16958),o=t(65800),i=(0,n.LC)({reducerPath:u.V.UPLOAD_DOCUMENT,baseQuery:o.hK,tagTypes:[],endpoints:function(e){return{uploadDocumentFile:e.mutation({query:function(e){var r=e.file,t=e.uid,n=new FormData;return n.append("file",r),n.append("uid",t),{url:a.h.UPLOAD_DOCUMENT_URL,method:"POST",body:n}},transformResponse:function(e){return e&&(null==e?void 0:e.publicUrl)?{id:e.id,url:e.publicUrl,fileName:e.fileName,fileSize:e.fileSize,fileType:e.fileType}:e&&"string"==typeof e?{id:"",url:e,fileName:"",fileSize:0,fileType:""}:null}})}}}),s=i.useUploadDocumentFileMutation},56292:function(e,r,t){t.d(r,{Z:function(){return s},l:function(){return i}});var n=t(85687),a=t(88138),u=t(16958),o=t(65800),i=(0,n.LC)({reducerPath:u.V.UPLOAD_FILE,baseQuery:o.hK,endpoints:function(e){return{uploadImageFile:e.mutation({query:function(e){var r=e.file,t=e.uid,n=new FormData;return n.append("file",r),n.append("uid",t),{url:a.h.UPLOAD_IMAGE_URL,method:"POST",body:n}},transformResponse:function(e){return e&&(null==e?void 0:e.publicUrl)?null==e?void 0:e.publicUrl:e&&"string"==typeof e?e:null}})}}}),s=i.useUploadImageFileMutation},26015:function(e,r,t){t.d(r,{L:function(){return c},P:function(){return l}});var n=t(45610),a=t(50044),u=t(85687),o=t(27419),i=t(65800),s=t(16958),d=t(88138),c=(0,u.LC)({reducerPath:s.V.UX_REVIEW,baseQuery:i.hK,tagTypes:[s.q.DESIGN_REVIEWS,s.q.SUBSCRIPTION,s.q.HEATMAP],endpoints:function(e){var r;return{generateHeatmap:e.mutation({query:function(e){return{url:d.h.GENERATE_HEATMAP,method:"POST",body:e}},onQueryStarted:(r=(0,n._)(function(e,r){var t,n;return(0,a.Jh)(this,function(e){switch(e.label){case 0:t=r.dispatch,n=r.queryFulfilled,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,n];case 2:return e.sent(),t(o.h7.util.invalidateTags([{type:s.q.SUBSCRIPTION,id:"STATUS"}])),[3,4];case 3:return e.sent(),console.error("Error generating heatmap"),[3,4];case 4:return[2]}})}),function(e,t){return r.apply(this,arguments)})})}}}),l=c.useGenerateHeatmapMutation},88138:function(e,r,t){t.d(r,{h:function(){return n}});var n={GET_COUNT:"/getCount",UPDATE_COUNT:"/updateCount",GET_SAVED_REVIEWS:"/getSavedDesignReviews",SAVE_REVIEW:"/saveNewDesignReview",UNSAVE_REVIEW:"/unsaveDesignReview",GENERATE_UX_REVIEW:"/ux-review-general",GENERATE_HEATMAP:"/heatmap",UPLOAD_DOCUMENT_URL:"/upload-file-to-firebase/document",UPLOAD_IMAGE_URL:"/uploadImageFileToFirebase"}},15203:function(e,r,t){t.d(r,{b:function(){return getStore},h:function(){return store}});var n=t(21575),a=t(73135),u=t(55345),o=t(16972),i=t(52477),s=t(36902),d=t(14451),c=t(93629),l=t(30398),p=t(90335),f=t(27419),S=t(26015),E=t(85687),y=t(38597),v=t(16958),m=t(88138),h=(0,E.LC)({reducerPath:v.V.USER_COUNT,baseQuery:(0,u.ni)({baseUrl:y.URLS.authFuncUrl}),tagTypes:[v.q.USER_COUNT],endpoints:function(e){return{getCount:e.query({query:function(e){return{url:m.h.GET_COUNT,method:"POST",headers:{"Content-Type":"application/json"},body:{uid:e}}},providesTags:[v.q.USER_COUNT],transformResponse:function(e){return(null==e?void 0:e.userAPICount)||0}}),updateCount:e.mutation({query:function(e){var r=e.uid,t=e.page;return{url:m.h.UPDATE_COUNT,method:"POST",headers:{"Content-Type":"application/json"},body:{uid:r,page:t}}},invalidatesTags:[v.q.USER_COUNT]})}}});h.useGetCountQuery,h.useUpdateCountMutation;var A=t(56292),T=t(44388),g=t(82924),I=t(61841),_=t(44568),R=t(24424),P=null,store=function(){var e;return P||(P=(0,a.xC)({reducer:(e={},(0,n._)(e,o.yk.reducerPath,o.yk.reducer),(0,n._)(e,i.TY.reducerPath,i.TY.reducer),(0,n._)(e,s.cr.reducerPath,s.cr.reducer),(0,n._)(e,d.W$.reducerPath,d.W$.reducer),(0,n._)(e,c.aG.reducerPath,c.aG.reducer),(0,n._)(e,l.c$.reducerPath,l.c$.reducer),(0,n._)(e,p.iJ.reducerPath,p.iJ.reducer),(0,n._)(e,f.h7.reducerPath,f.h7.reducer),(0,n._)(e,S.L.reducerPath,S.L.reducer),(0,n._)(e,h.reducerPath,h.reducer),(0,n._)(e,A.l.reducerPath,A.l.reducer),(0,n._)(e,T.OR.reducerPath,T.OR.reducer),(0,n._)(e,g.fo.reducerPath,g.fo.reducer),(0,n._)(e,I.uW.reducerPath,I.uW.reducer),(0,n._)(e,_.w.reducerPath,_.w.reducer),(0,n._)(e,R.Gt.reducerPath,R.Gt.reducer),e),middleware:function(e){return e().concat(o.yk.middleware,i.TY.middleware,s.cr.middleware,d.W$.middleware,c.aG.middleware,l.c$.middleware,p.iJ.middleware,f.h7.middleware,S.L.middleware,h.middleware,A.l.middleware,T.OR.middleware,g.fo.middleware,R.Gt.middleware,I.uW.middleware,_.w.middleware)},devTools:!1}),(0,u.sj)(P.dispatch)),P},getStore=function(){return P||(P=store()),P}}}]);